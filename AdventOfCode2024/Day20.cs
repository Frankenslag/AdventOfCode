namespace AdventOfCode2024
{
    internal class Day20
    {
        private static readonly string[] Data =
        [
            "#############################################################################################################################################",
            "#...#.........................#...#.......#...###.........#...###.....#.......#...#.....#...#.....#...#...#...#...###...#...#...........#...#",
            "#.#.#.#######################.#.#.#.#####.#.#.###.#######.#.#.###.###.#.#####.#.#.#.###.#.#.#.###.#.#.#.#.#.#.#.#.###.#.#.#.#.#########.#.#.#",
            "#.#.#.......#.............#...#.#...#.....#.#...#.....#...#.#...#...#...#.....#.#.#...#.#.#...#...#.#.#.#.#.#.#.#.....#...#.#...#.......#.#.#",
            "#.#.#######.#.###########.#.###.#####.#####.###.#####.#.###.###.###.#####.#####.#.###.#.#.#####.###.#.#.#.#.#.#.###########.###.#.#######.#.#",
            "#.#.###...#...#.....#.....#...#.....#.....#...#.#.....#...#...#.###.#.....###...#...#.#.#.....#...#.#.#.#.#.#.#.#...........###.#.#...###.#.#",
            "#.#.###.#.#####.###.#.#######.#####.#####.###.#.#.#######.###.#.###.#.#######.#####.#.#.#####.###.#.#.#.#.#.#.#.#.#############.#.#.#.###.#.#",
            "#.#.#...#.#...#...#.#.....#...#...#.#.....#...#.#.......#.#...#.....#.#.....#...#...#.#.#...#...#.#.#.#.#.#.#.#.#.###...#...#...#...#.....#.#",
            "#.#.#.###.#.#.###.#.#####.#.###.#.#.#.#####.###.#######.#.#.#########.#.###.###.#.###.#.#.#.###.#.#.#.#.#.#.#.#.#.###.#.#.#.#.#############.#",
            "#.#...#...#.#.#...#.#...#.#.#...#...#.#.....#...#...#...#.#.#.........#.#...#...#.....#.#.#.#...#.#.#.#.#.#.#.#.#...#.#...#.#.#.............#",
            "#.#####.###.#.#.###.#.#.#.#.#.#######.#.#####.###.#.#.###.#.#.#########.#.###.#########.#.#.#.###.#.#.#.#.#.#.#.###.#.#####.#.#.#############",
            "#.#...#...#.#.#...#.#.#...#.#...#.....#...#...#...#.#...#...#...#.....#.#...#.........#...#.#...#.#.#.#.#.#.#.#.#...#.#.....#.#...#...###...#",
            "#.#.#.###.#.#.###.#.#.#####.###.#.#######.#.###.###.###.#######.#.###.#.###.#########.#####.###.#.#.#.#.#.#.#.#.#.###.#.#####.###.#.#.###.#.#",
            "#...#...#...#.###.#.#...#...###.#.#...#...#...#...#...#.....#...#...#.#.#...#...###...#...#.#...#.#.#.#.#.#.#.#.#.....#.....#.#...#.#.#...#.#",
            "#######.#####.###.#.###.#.#####.#.#.#.#.#####.###.###.#####.#.#####.#.#.#.###.#.###.###.#.#.#.###.#.#.#.#.#.#.#.###########.#.#.###.#.#.###.#",
            "#.....#.....#...#.#.###.#.###...#.#.#.#.....#.....#...#.....#.###...#.#.#.#...#...#...#.#...#...#.#.#...#.#.#.#...#.........#.#...#.#.#.#...#",
            "#.###.#####.###.#.#.###.#.###.###.#.#.#####.#######.###.#####.###.###.#.#.#.#####.###.#.#######.#.#.#####.#.#.###.#.#########.###.#.#.#.#.###",
            "#...#.#...#...#.#.#.#...#...#...#.#.#.#...#.#.......#...#...#.#...#...#.#.#.#.....#...#...#...#.#.#...#...#.#...#.#.#...#...#.#...#.#...#...#",
            "###.#.#.#.###.#.#.#.#.#####.###.#.#.#.#.#.#.#.#######.###.#.#.#.###.###.#.#.#.#####.#####.#.#.#.#.###.#.###.###.#.#.#.#.#.#.#.#.###.#######.#",
            "#...#...#.....#...#.#.....#.#...#.#.#.#.#.#.#.###...#.....#.#.#...#.#...#.#.#...###.....#.#.#.#.#.#...#...#.#...#.#...#...#.#.#.###.#...#...#",
            "#.#################.#####.#.#.###.#.#.#.#.#.#.###.#.#######.#.###.#.#.###.#.###.#######.#.#.#.#.#.#.#####.#.#.###.#########.#.#.###.#.#.#.###",
            "#.#...............#.#...#.#.#.#...#.#.#.#...#...#.#...###...#...#.#.#...#.#.#...#...###.#.#.#.#.#...#.....#.#.#...#...#...#.#.#.#...#.#...###",
            "#.#.#############.#.#.#.#.#.#.#.###.#.#.#######.#.###.###.#####.#.#.###.#.#.#.###.#.###.#.#.#.#.#####.#####.#.#.###.#.#.#.#.#.#.#.###.#######",
            "#...###...........#...#...#...#...#.#.#.#.....#.#...#...#...#...#.#.....#.#.#...#.#.#...#.#.#.#...#...#.....#...#...#.#.#...#.#.#...#.......#",
            "#######.#########################.#.#.#.#.###.#.###.###.###.#.###.#######.#.###.#.#.#.###.#.#.###.#.###.#########.###.#.#####.#.###.#######.#",
            "###...#.............#.........#...#.#.#.#...#...###.#...#...#...#...#.....#...#.#.#.#...#.#.#.#...#.###...#...#...###...###...#.....#...#...#",
            "###.#.#############.#.#######.#.###.#.#.###.#######.#.###.#####.###.#.#######.#.#.#.###.#.#.#.#.###.#####.#.#.#.###########.#########.#.#.###",
            "#...#...#.....#...#...#.......#.###.#.#.#...#...#...#...#...#...#...#...#...#.#.#.#...#.#.#.#.#...#.#...#...#.#.....###...#...#...#...#...###",
            "#.#####.#.###.#.#.#####.#######.###.#.#.#.###.#.#.#####.###.#.###.#####.#.#.#.#.#.###.#.#.#.#.###.#.#.#.#####.#####.###.#.###.#.#.#.#########",
            "#.....#.#...#.#.#...###.......#...#.#.#.#...#.#.#.....#.###.#.###.....#...#.#.#.#...#.#S#...#...#.#.#.#.#...#.#.....#...#...#.#.#...#.......#",
            "#####.#.###.#.#.###.#########.###.#.#.#.###.#.#.#####.#.###.#.#######.#####.#.#.###.#.#########.#.#.#.#.#.#.#.#.#####.#####.#.#.#####.#####.#",
            "#.....#.#...#.#...#.#...#...#...#.#.#.#.#...#.#.#...#.#...#.#.#.......#.....#.#.#...#.###.......#.#.#.#.#.#.#.#.#...#...#...#.#.......#.....#",
            "#.#####.#.###.###.#.#.#.#.#.###.#.#.#.#.#.###.#.#.#.#.###.#.#.#.#######.#####.#.#.###.###.#######.#.#.#.#.#.#.#.#.#.###.#.###.#########.#####",
            "#.....#.#...#.....#...#...#.....#...#.#.#.###.#.#.#.#.#...#.#.#.......#.#...#.#.#...#.###.###...#.#.#.#.#.#...#...#.....#.###.#.......#.....#",
            "#####.#.###.#########################.#.#.###.#.#.#.#.#.###.#.#######.#.#.#.#.#.###.#.###.###.#.#.#.#.#.#.###############.###.#.#####.#####.#",
            "#.....#.....#...#...#...#...#.......#.#.#.#...#.#.#.#.#...#.#...#.....#...#.#.#...#.#.###...#.#.#.#...#...#...#...........#...#.#...#.......#",
            "#.###########.#.#.#.#.#.#.#.#.#####.#.#.#.#.###.#.#.#.###.#.###.#.#########.#.###.#.#.#####.#.#.#.#########.#.#.###########.###.#.#.#########",
            "#.........#...#.#.#...#.#.#...#...#.#...#.#...#.#.#...###.#...#.#.......#...#...#...#.#####...#...###.......#...#...#.......#...#.#...#.....#",
            "#########.#.###.#.#####.#.#####.#.#.#####.###.#.#.#######.###.#.#######.#.#####.#####.###############.###########.#.#.#######.###.###.#.###.#",
            "#.........#...#.#.#.....#.#.....#...#...#.#...#.#.#.......#...#...#...#.#...#...#.....#########.....#.....###.....#.#.#.....#.....#...#...#.#",
            "#.###########.#.#.#.#####.#.#########.#.#.#.###.#.#.#######.#####.#.#.#.###.#.###.#############.###.#####.###.#####.#.#.###.#######.#####.#.#",
            "#.....#...#...#...#.......#...........#.#.#...#.#.#.#.....#.#####.#.#.#.#...#...#.#...#...#####...#.#...#...#...#...#.#...#.#...#...#.....#.#",
            "#####.#.#.#.###########################.#.###.#.#.#.#.###.#.#####.#.#.#.#.#####.#.#.#.#.#.#######.#.#.#.###.###.#.###.###.#.#.#.#.###.#####.#",
            "#.....#.#.#.....#.........###...........#.....#...#.#.###.#...#...#.#.#.#.#...#.#...#.#.#.#####...#.#.#.....#...#.....#...#...#...###...#...#",
            "#.#####.#.#####.#.#######.###.#####################.#.###.###.#.###.#.#.#.#.#.#.#####.#.#.#####.###.#.#######.#########.###############.#.###",
            "#.#...#.#.#.....#...#...#.....#.................#...#.#...#...#.#...#.#.#...#.#.....#...#.#####...#...#.......#...#...#...#.......###...#...#",
            "#.#.#.#.#.#.#######.#.#.#######.###############.#.###.#.###.###.#.###.#.#####.#####.#####.#######.#####.#######.#.#.#.###.#.#####.###.#####.#",
            "#...#.#.#...#.....#...#.........#...............#.....#.#...###...###...#.....#...#.....#.#######...#...#...#...#...#.....#...#...#...#.....#",
            "#####.#.#####.###.###############.#####################.#.###############.#####.#.#####.#.#########.#.###.#.#.###############.#.###.###.#####",
            "#.....#.#...#...#.###...#...#...#...............#...#...#...........#.....#...#.#...#...#......E###...#...#...#...#...#.....#.#.....#...#...#",
            "#.#####.#.#.###.#.###.#.#.#.#.#.###############.#.#.#.#############.#.#####.#.#.###.#.#################.#######.#.#.#.#.###.#.#######.###.#.#",
            "#.......#.#.#...#.#...#...#...#.............#...#.#...#...#...#...#.#...#...#.#.###.#.......#.........#...#...#.#...#...#...#.#.......#...#.#",
            "#########.#.#.###.#.#######################.#.###.#####.#.#.#.#.#.#.###.#.###.#.###.#######.#.#######.###.#.#.#.#########.###.#.#######.###.#",
            "#.........#.#...#.#.#.....................#.#.###.#...#.#.#.#.#.#...###...#...#...#.........#.......#.....#.#.#.#.......#.###.#...#...#.#...#",
            "#.#########.###.#.#.#.###################.#.#.###.#.#.#.#.#.#.#.###########.#####.#################.#######.#.#.#.#####.#.###.###.#.#.#.#.###",
            "#...#.....#.....#.#...#.....#.............#...#...#.#.#.#.#.#.#...#.........#...#.....#.....###...#.........#...#.....#.#...#.#...#.#.#.#.###",
            "###.#.###.#######.#####.###.#.#################.###.#.#.#.#.#.###.#.#########.#.#####.#.###.###.#.###################.#.###.#.#.###.#.#.#.###",
            "#...#.###...#...#.....#...#.#.................#...#.#.#.#.#.#.#...#.......#...#.#.....#.#...#...#...#.........#.......#.#...#.#.###.#...#...#",
            "#.###.#####.#.#.#####.###.#.#################.###.#.#.#.#.#.#.#.#########.#.###.#.#####.#.###.#####.#.#######.#.#######.#.###.#.###.#######.#",
            "#...#...###...#.#...#.....#.................#.#...#.#...#...#.#.#...#.....#...#.#.###...#...#...#...#.......#.#.......#...#...#.....#...#...#",
            "###.###.#######.#.#.#######################.#.#.###.#########.#.#.#.#.#######.#.#.###.#####.###.#.#########.#.#######.#####.#########.#.#.###",
            "###.....#...#...#.#...#...#.........###...#...#...#.......###.#.#.#...#...#...#.#.#...#.....#...#.....#.....#...#...#...###.#.........#...###",
            "#########.#.#.###.###.#.#.#.#######.###.#.#######.#######.###.#.#.#####.#.#.###.#.#.###.#####.#######.#.#######.#.#.###.###.#.###############",
            "#...#...#.#.#...#...#...#...###...#.....#.......#.#...#...#...#.#.#...#.#.#...#...#...#.....#.....#...#.......#.#.#...#.....#...###...#.....#",
            "#.#.#.#.#.#.###.###.###########.#.#############.#.#.#.#.###.###.#.#.#.#.#.###.#######.#####.#####.#.#########.#.#.###.#########.###.#.#.###.#",
            "#.#...#...#.....#...#...........#.....#.........#...#.#.###...#.#.#.#.#.#...#.#...#...#...#.......#.....#...#.#.#...#...#.....#.....#...#...#",
            "#.###############.###.###############.#.#############.#.#####.#.#.#.#.#.###.#.#.#.#.###.#.#############.#.#.#.#.###.###.#.###.###########.###",
            "#.....#...#...#...###...............#.#.......#...###...#...#.#.#.#.#...###...#.#.#.....#.#...#...#...#...#...#.#...###.#.###...........#...#",
            "#####.#.#.#.#.#.###################.#.#######.#.#.#######.#.#.#.#.#.###########.#.#######.#.#.#.#.#.#.#########.#.#####.#.#############.###.#",
            "#.....#.#...#.#.#.............#.....#.........#.#.......#.#.#...#...#...........#.......#...#.#.#.#.#.#.......#.#...#...#.........#...#.#...#",
            "#.#####.#####.#.#.###########.#.###############.#######.#.#.#########.#################.#####.#.#.#.#.#.#####.#.###.#.###########.#.#.#.#.###",
            "#.......#...#...#.....#.....#...#...#...........#.......#.#...#.....#.................#.......#.#...#.#.#.....#.....#...#...#...#.#.#.#...###",
            "#########.#.#########.#.###.#####.#.#.###########.#######.###.#.###.#################.#########.#####.#.#.#############.#.#.#.#.#.#.#.#######",
            "#.........#...#.....#...#...#.....#...#.........#.......#...#...#...###...#...###...#.....#.....#.....#.#.###...#.....#...#.#.#.#...#...#...#",
            "#.###########.#.###.#####.###.#########.#######.#######.###.#####.#####.#.#.#.###.#.#####.#.#####.#####.#.###.#.#.###.#####.#.#.#######.#.#.#",
            "#...........#...#...#...#.....#...#...#.......#.......#.#...#.....###...#...#.#...#.......#...#...#...#.#.....#...#...#...#...#.#.....#...#.#",
            "###########.#####.###.#.#######.#.#.#.#######.#######.#.#.###.#######.#######.#.#############.#.###.#.#.###########.###.#.#####.#.###.#####.#",
            "#...###...#.....#.#...#.........#...#...#...#...#...#...#...#...#...#.......#.#...............#...#.#...#.......#...#...#.....#.#.#...#.....#",
            "#.#.###.#.#####.#.#.###################.#.#.###.#.#.#######.###.#.#.#######.#.###################.#.#####.#####.#.###.#######.#.#.#.###.#####",
            "#.#...#.#.#.....#...#.....#.........###...#.....#.#.....#...#...#.#.#...###.#.#...###...#...#####...#.....#...#...#...#...#...#.#.#...#.....#",
            "#.###.#.#.#.#########.###.#.#######.#############.#####.#.###.###.#.#.#.###.#.#.#.###.#.#.#.#########.#####.#.#####.###.#.#.###.#.###.#####.#",
            "#...#...#...#.....#...###...###...#...#...#...###.#.....#.#...#...#...#.#...#.#.#...#.#.#.#...#.......#...#.#.#.....#...#...###...#...#...#.#",
            "###.#########.###.#.###########.#.###.#.#.#.#.###.#.#####.#.###.#######.#.###.#.###.#.#.#.###.#.#######.#.#.#.#.#####.#############.###.#.#.#",
            "###...#...#...#...#.#...........#.#...#.#...#.....#.#...#.#...#...#.....#...#.#...#...#.#.#...#.........#...#...#...#.....#...#.....#...#.#.#",
            "#####.#.#.#.###.###.#.###########.#.###.###########.#.#.#.###.###.#.#######.#.###.#####.#.#.#####################.#.#####.#.#.#.#####.###.#.#",
            "#.....#.#...###.....#.........#...#.....#...#.....#...#.#...#...#.#...#.....#.###.....#...#.............#...#...#.#.....#.#.#.#.......###...#",
            "#.#####.#####################.#.#########.#.#.###.#####.###.###.#.###.#.#####.#######.#################.#.#.#.#.#.#####.#.#.#.###############",
            "#.....#.#.............#.......#...#...#...#.#.###.#.....#...#...#.#...#...#...#...#...#...#...#...#...#.#.#.#.#.#.....#.#...#.......###...###",
            "#####.#.#.###########.#.#########.#.#.#.###.#.###.#.#####.###.###.#.#####.#.###.#.#.###.#.#.#.#.#.#.#.#.#.#.#.#.#####.#.###########.###.#.###",
            "###...#.#...........#...#.......#...#...###...#...#...###...#...#.#.#.....#.#...#.#...#.#...#...#...#.#.#.#.#.#.....#.#.#.....#...#.....#...#",
            "###.###.###########.#####.#####.###############.#####.#####.###.#.#.#.#####.#.###.###.#.#############.#.#.#.#.#####.#.#.#.###.#.#.#########.#",
            "#...#...#.........#.......#...#...........#...#.......#...#...#.#.#.#.....#.#...#...#.#.#.....#.......#...#...#...#...#...###.#.#.#.....#...#",
            "#.###.###.#######.#########.#.###########.#.#.#########.#.###.#.#.#.#####.#.###.###.#.#.#.###.#.###############.#.###########.#.#.#.###.#.###",
            "#.#...###.......#.#...#.....#.........#...#.#.#.......#.#.#...#...#.###...#.....#...#...#...#.#.#.....#.......#.#...........#...#...###.#...#",
            "#.#.###########.#.#.#.#.#############.#.###.#.#.#####.#.#.#.#######.###.#########.#########.#.#.#.###.#.#####.#.###########.###########.###.#",
            "#...#...#.......#...#...#.....#.....#...###.#.#...#...#.#.#.......#...#...#.......#####.....#.#...###...#.....#.#...........###.......#.#...#",
            "#####.#.#.###############.###.#.###.#######.#.###.#.###.#.#######.###.###.#.###########.#####.###########.#####.#.#############.#####.#.#.###",
            "#.....#.#.................#...#.###.....#...#...#.#.#...#.#.......#...#...#.#.....###...#...#...#.......#.......#.........#.....#...#.#.#...#",
            "#.#####.###################.###.#######.#.#####.#.#.#.###.#.#######.###.###.#.###.###.###.#.###.#.#####.#################.#.#####.#.#.#.###.#",
            "#.#...#...###...............#...#.....#.#.#.....#.#.#...#.#.......#...#.#...#...#...#.#...#.....#.....#.#...........#...#...#.....#...#.....#",
            "#.#.#.###.###.###############.###.###.#.#.#.#####.#.###.#.#######.###.#.#.#####.###.#.#.#############.#.#.#########.#.#.#####.###############",
            "#...#...#.....#.....#.......#.###...#...#.#...#...#.#...#.....###...#...#...###...#...#.#.......#...#.#.#.........#.#.#.#...#...#...........#",
            "#######.#######.###.#.#####.#.#####.#####.###.#.###.#.#######.#####.#######.#####.#####.#.#####.#.#.#.#.#########.#.#.#.#.#.###.#.#########.#",
            "#.....#.....#...###...#.....#.#.....#...#...#.#...#.#.#.......#...#...#.....#...#.#.....#.#.....#.#.#.#.#...#.....#...#.#.#...#...#...#...#.#",
            "#.###.#####.#.#########.#####.#.#####.#.###.#.###.#.#.#.#######.#.###.#.#####.#.#.#.#####.#.#####.#.#.#.#.#.#.#########.#.###.#####.#.#.#.#.#",
            "#.#...#.....#.#...#...#.......#.....#.#.#...#...#.#.#.#.....#...#.#...#.#.....#.#.#.#...#.#...#...#.#.#.#.#.#.........#...###...#...#...#...#",
            "#.#.###.#####.#.#.#.#.#############.#.#.#.#####.#.#.#.#####.#.###.#.###.#.#####.#.#.#.#.#.###.#.###.#.#.#.#.#########.#########.#.###########",
            "#.#.....#...#.#.#...#...............#.#.#.#.....#.#.#.#.....#...#.#...#.#.#.....#.#.#.#.#...#.#...#.#.#.#.#.#.....#...#...#...#...#...###...#",
            "#.#######.#.#.#.#####################.#.#.#.#####.#.#.#.#######.#.###.#.#.#.#####.#.#.#.###.#.###.#.#.#.#.#.#.###.#.###.#.#.#.#####.#.###.#.#",
            "#.....#...#.#.#...#...#.......#.......#.#.#...#...#.#.#...#...#.#.#...#.#.#.#.....#.#.#.....#.#...#...#.#.#.#...#.#.....#...#.......#.....#.#",
            "#####.#.###.#.###.#.#.#.#####.#.#######.#.###.#.###.#.###.#.#.#.#.#.###.#.#.#.#####.#.#######.#.#######.#.#.###.#.#########################.#",
            "#.....#.###...###...#.#.#...#...###.....#.#...#.###.#.#...#.#.#.#.#.#...#.#.#.#.....#.#...###.#.....###...#.#...#.......#...#.......#.......#",
            "#.#####.#############.#.#.#.#######.#####.#.###.###.#.#.###.#.#.#.#.#.###.#.#.#.#####.#.#.###.#####.#######.#.#########.#.#.#.#####.#.#######",
            "#.#...#.#.............#.#.#.........#.....#.....#...#.#...#.#.#.#.#.#...#.#.#.#.#...#...#...#.#.....#...#...#.........#...#.#.....#...#...###",
            "#.#.#.#.#.#############.#.###########.###########.###.###.#.#.#.#.#.###.#.#.#.#.#.#.#######.#.#.#####.#.#.###########.#####.#####.#####.#.###",
            "#.#.#.#.#...#...........#.....#.....#.....###...#.#...#...#.#.#.#.#.###.#.#.#.#.#.#...#...#.#.#.......#.#...#.....#...###...#.....#.....#...#",
            "#.#.#.#.###.#.###############.#.###.#####.###.#.#.#.###.###.#.#.#.#.###.#.#.#.#.#.###.#.#.#.#.#########.###.#.###.#.#####.###.#####.#######.#",
            "#.#.#...#...#.#...............#...#...#...#...#...#...#.#...#.#.#...#...#.#...#.#...#...#.#.#.#...#...#...#.#...#.#.....#...#.....#.#.......#",
            "#.#.#####.###.#.#################.###.#.###.#########.#.#.###.#.#####.###.#####.###.#####.#.#.#.#.#.#.###.#.###.#.#####.###.#####.#.#.#######",
            "#...#...#.....#...............#...#...#.#...#.......#.#.#...#.#.....#...#.#.....#...#...#.#.#...#.#.#...#.#.#...#.#.....#...#.....#.#.#.....#",
            "#####.#.#####################.#.###.###.#.###.#####.#.#.###.#.#####.###.#.#.#####.###.#.#.#.#####.#.###.#.#.#.###.#.#####.###.#####.#.#.###.#",
            "#.....#.............###.......#...#...#.#...#.###...#.#...#.#.#.....#...#.#.#...#...#.#...#...#...#...#.#.#.#.#...#...###...#.......#...#...#",
            "#.#################.###.#########.###.#.###.#.###.###.###.#.#.#.#####.###.#.#.#.###.#.#######.#.#####.#.#.#.#.#.#####.#####.#############.###",
            "#...#.........#...#.....#...#...#...#.#.#...#...#...#.###...#.#.....#...#.#.#.#.....#...#...#.#...#...#...#.#.#.#...#...###...#...#...#...###",
            "###.#.#######.#.#.#######.#.#.#.###.#.#.#.#####.###.#.#######.#####.###.#.#.#.#########.#.#.#.###.#.#######.#.#.#.#.###.#####.#.#.#.#.#.#####",
            "#...#.###...#.#.#...#...#.#...#...#.#...#.#...#.#...#.......#.....#.#...#.#.#...#.......#.#...###.#.......#.#.#.#.#...#.....#.#.#...#.#.....#",
            "#.###.###.#.#.#.###.#.#.#.#######.#.#####.#.#.#.#.#########.#####.#.#.###.#.###.#.#######.#######.#######.#.#.#.#.###.#####.#.#.#####.#####.#",
            "#...#.#...#...#.#...#.#...#...#...#...###.#.#.#.#...#.....#.#.....#.#.#...#.#...#...#...#.###.....#...#...#.#.#.#.#...#...#.#.#.....#.......#",
            "###.#.#.#######.#.###.#####.#.#.#####.###.#.#.#.###.#.###.#.#.#####.#.#.###.#.#####.#.#.#.###.#####.#.#.###.#.#.#.#.###.#.#.#.#####.#########",
            "###.#.#.#...#...#...#.###...#...#.....#...#.#.#.#...#...#.#.#...#...#.#.###.#.#.....#.#.#...#...#...#.#...#.#.#.#.#...#.#.#.#.#...#.........#",
            "###.#.#.#.#.#.#####.#.###.#######.#####.###.#.#.#.#####.#.#.###.#.###.#.###.#.#.#####.#.###.###.#.###.###.#.#.#.#.###.#.#.#.#.#.#.#########.#",
            "#...#.#...#...###...#.#...#...#...#.....#...#.#.#...#...#.#.###.#.#...#...#...#.....#.#...#...#...###.....#...#...###.#.#...#...#.#...#...#.#",
            "#.###.###########.###.#.###.#.#.###.#####.###.#.###.#.###.#.###.#.#.#####.#########.#.###.###.#######################.#.#########.#.#.#.#.#.#",
            "#.....###...#...#.....#.....#.#.#...#...#.#...#.#...#.###.#.#...#.#.#...#.#.........#.###...#...............###.......#...#...###.#.#.#.#.#.#",
            "#########.#.#.#.#############.#.#.###.#.#.#.###.#.###.###.#.#.###.#.#.#.#.#.#########.#####.###############.###.#########.#.#.###.#.#.#.#.#.#",
            "#.........#...#...............#.#...#.#...#.#...#.....#...#.#...#.#...#.#.#...#.....#...#...#.....#.......#...#...#.....#...#...#...#...#...#",
            "#.#############################.###.#.#####.#.#########.###.###.#.#####.#.###.#.###.###.#.###.###.#.#####.###.###.#.###.#######.#############",
            "#...#...#...#...#.....#...#...#...#.#.#.....#.........#...#.#...#.....#.#.#...#...#...#.#.#...#...#.....#...#...#.#.#...#.....#.............#",
            "###.#.#.#.#.#.#.#.###.#.#.#.#.###.#.#.#.#############.###.#.#.#######.#.#.#.#####.###.#.#.#.###.#######.###.###.#.#.#.###.###.#############.#",
            "###...#...#...#...###...#...#.....#...#...............###...#.........#...#.......###...#...###.........###.....#...#.....###...............#",
            "#############################################################################################################################################"
        ];

        private static readonly (int dx, int dy)[] Directions = [(0, -1), (1, 0), (0, +1), (-1, 0)];
        private enum MapFeature { Wall = -1, End = -2, Start = -3 }

        private static int[,]? _map;

        private static List<(int x, int y)> FindPath((int x, int y) startPosition, (int x, int y) endPosition, int width, int height)
        {
            List<(int x, int y)> returnPath = [];

            (int x, int y) currPosition = startPosition;

            while (currPosition != endPosition)
            {
                returnPath.Add(currPosition);

                currPosition = Directions.Select(dir => (x: currPosition.x + dir.dx, y: currPosition.y + dir.dy)).First(nextPos => nextPos.x >= 0 && nextPos.x < width && nextPos.y >= 0 && nextPos.y < height && !returnPath.Contains(nextPos) && _map![nextPos.x, nextPos.y] != (int) MapFeature.Wall);
            }

            returnPath.Add(endPosition);

            return returnPath;
        }

        private static List<(int dx, int dy)> GetDeltas(int distance) =>Enumerable.Range(-distance, 2 * distance + 1).SelectMany(dy => Enumerable.Range(-distance, 2 * distance + 1).Select(dx => (dx, dy)))
                .Where(delta => Math.Abs(delta.dx) + Math.Abs(delta.dy) > 1 && Math.Abs(delta.dx) + Math.Abs(delta.dy) <= distance).ToList();

        private static void Execute(string[] inputdata)
        {
            _map = inputdata.SelectMany((line, row) => line.Select((ch, col) => (ch, col, row))).Aggregate(new int[inputdata[0].Length, inputdata.Length], (curr, next) =>
            {
                curr[next.col, next.row] = next.ch switch {'#' => (int) MapFeature.Wall, 'E' => (int) MapFeature.End, 'S' => (int) MapFeature.Start, _ => int.MaxValue};
                return curr;
            });

            (int col, int row) startPos = Enumerable.Range(0, _map.Length).Select(i => (col: i % _map.GetLength(1), row: i / _map.GetLength(1))).First(pos => _map[pos.col, pos.row] == (int) MapFeature.Start);
            (int col, int row) endPos = Enumerable.Range(0, _map.Length).Select(i => (col: i % _map.GetLength(1), row: i / _map.GetLength(1))).First(pos => _map[pos.col, pos.row] == (int) MapFeature.End);

            List<(int x, int y)> path = FindPath(startPos, endPos, inputdata[0].Length, inputdata.Length);

            for (int part = 0; part < 2; part++)
            {
                List<(int dx, int dy)> deltas = GetDeltas( part == 0 ? 2 : 20);

                Dictionary<int, int> savings = [];

                foreach ((int x, int y) position in path)
                {
                    foreach (((int x, int y) pos, int distance) testPosition in deltas.Select(delta => ((position.x + delta.dx, position.y + delta.dy), Math.Abs(delta.dx) + Math.Abs(delta.dy))))
                    {
                        if (path.Contains(testPosition.pos))
                        {
                            int saving = path.IndexOf(testPosition.pos) - path.IndexOf(position) - Math.Abs(testPosition.distance);

                            if (saving > 0)
                            {
                                savings.TryAdd(saving, 0);
                                savings[saving] += 1;
                            }
                        }
                    }
                }

                Console.WriteLine($"Day 20 Part {part + 1} Answer is cheats {savings.Where(kvp => kvp.Key >= 100).Sum(kvp => kvp.Value)}.");
            }
        }

        public static void Run() => Execute(Data);
    }
}
